<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <video autoplay></video>
</body>
<script>
    navigator.mediaDevices.getUserMedia({
  video: {
    facingMode: 'environment',
  }
})
.then((stream) => {
  const video = document.querySelector('video');
  video.srcObject = stream;
  
  // get the active track of the stream
  const track = stream.getVideoTracks()[0];

  video.addEventListener('loadedmetadata', (e) => {  
    window.setTimeout(() => (
      onCapabilitiesReady(track.getCapabilities())
    ), 500);
  });

  function onCapabilitiesReady(capabilities) {
   
    if (capabilities.torch) {
      track.applyConstraints({
        advanced: [{torch: true}]
      })
      .catch(e => console.log(e));
    }
  }
  
})
.catch(err => console.error('getUserMedia() failed: ', err));
</script>
</html>