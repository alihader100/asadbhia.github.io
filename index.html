<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>app</title>
</head>
<style>
    video{
       border: 10px solid red; 
    }
    canvas{
       border: 10px solid yellow; 
    }
</style>
<body>
    <video id="video" width="800px" height="450px" autoplay muted loop></video>
    <canvas id="output-canvas" width="800px" height="450px"></canvas>
</body>
<script>
    let video, c1, ctx1, c_tmp, ctx_tmp;
    function init() {
        video = document.getElementById('video');
        if(navigator.mediaDevices.getUserMedia){
            navigator.mediaDevices.getUserMedia({
                video:true
            }).then((s)=>{
                video.srcObject=s
            }).catch((err)=>{
                alert(err);
            })
        }else{
            alert("no");
        }

        c1 = document.getElementById('output-canvas');
        ctx1 = c1.getContext('2d');
        c_tmp = document.createElement('canvas');
        c_tmp.setAttribute('width', 800);
        c_tmp.setAttribute('height', 450);
        ctx_tmp = c_tmp.getContext('2d');
        video.addEventListener('play', computeFrame);
    }
    function computeFrame() {
        ctx_tmp.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
        let frame = ctx_tmp.getImageData(0, 0, video.videoWidth, video.videoHeight);
        for (let i = 0; i < frame.data.length / 4; i++) {
            let r = frame.data[i * 4 + 0];
            let g = frame.data[i * 4 + 1];
            let b = frame.data[i * 4 + 2];
            if (r > 70 && r < 160 && g > 95 && g < 220 && b > 25 && b < 150) { frame.data[i * 4 + 3] = 0; }
        }
        ctx1.putImageData(frame, 0, 0);
        setTimeout(computeFrame, 0);
    }
    document.addEventListener("DOMContentLoaded", () => {
        init();
    });



</script>

</html>